<!doctype html>
<html lang="en">

<head>
    <title>Products</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom Styles -->
    <style>
        .card-body{
            transition: all ease 1.5s;
        }

        .card-text {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: all 0.3s ease;
        }

        .card-text.expanded {
            display: block;
            -webkit-line-clamp: unset;
            overflow: visible;
        }

        .read-more-btn {
            color: #0d6efd;
            background: none;
            border: none;
            padding: 0;
            text-align: left;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .read-more-btn:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>

    <main class="container py-4">
        <div class="row" id="pro-row"></div>
    </main>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>

    <!-- Script to Fetch and Append Product Cards -->
    <script>
        async function getData() {
            try {
                const rawData = await fetch("https://fakestoreapi.com/products/");
                const data = await rawData.json();
                showData(data);
            } catch (error) {
                console.error("Failed to fetch data:", error);
            }
        }

        function showData(data) {
            const row = document.getElementById("pro-row");

            data.forEach(product => {
                // Column
                const col = document.createElement("div");
                col.className = "col-md-3 mb-4";

                // Card
                const card = document.createElement("div");
                card.className = "card h-100 shadow-sm";

                // Image
                const img = document.createElement("img");
                img.className = "card-img-top";
                img.src = product.image;
                img.alt = product.title;
                img.style.height = "200px";
                img.style.objectFit = "contain";

                // Card Body
                const cardBody = document.createElement("div");
                cardBody.className = "card-body d-flex flex-column";

                // Title
                const title = document.createElement("h5");
                title.className = "card-title";
                title.textContent = product.title;

                // Description
                const desc = document.createElement("p");
                desc.className = "card-text flex-grow-1";
                desc.textContent = product.description;

                // Read More Button
                const readMoreBtn = document.createElement("button");
                readMoreBtn.className = "read-more-btn mt-2";
                readMoreBtn.textContent = "Read more";
                readMoreBtn.onclick = () => {
                    desc.classList.toggle("expanded");
                    readMoreBtn.textContent = desc.classList.contains("expanded") ? "Read less" : "Read more";
                };

                // Button Group
                const btnGroup = document.createElement("div");
                btnGroup.className = "d-grid gap-2 mt-3";

                const buyBtn = document.createElement("button");
                buyBtn.className = "btn btn-success";
                buyBtn.textContent = "Buy Now";

                const cartBtn = document.createElement("button");
                cartBtn.className = "btn btn-outline-primary";
                cartBtn.textContent = "Add to Cart";

                const favBtn = document.createElement("button");
                favBtn.className = "btn btn-outline-danger";
                favBtn.innerHTML = `<i class="bi bi-heart"></i> Favorite`;

                // Append buttons
                btnGroup.appendChild(buyBtn);
                btnGroup.appendChild(cartBtn);
                btnGroup.appendChild(favBtn);

                // Assemble card body
                cardBody.appendChild(title);
                cardBody.appendChild(desc);
                cardBody.appendChild(readMoreBtn);
                cardBody.appendChild(btnGroup);

                // Assemble card
                card.appendChild(img);
                card.appendChild(cardBody);
                col.appendChild(card);

                // Append column to row
                row.appendChild(col);
            });
        }

        // Call the function
        getData();
    </script>
</body>

</html>
